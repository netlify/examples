---
import Layout from "../layouts/Layout.astro";
---

<Layout title="OAuth MCP">
    <section>
        <h1>Authenticated MCP with Netlify and Stytch</h1>
        <p>
            A starter example for using Netlify serverless functions and Stytch Identity to provide an authenticated MCP server exposing user-scoped data to agents.
            <br/>
            <a href="/login"><button>Log In to the Demo</button></a>
        </p>
    </section>

    <section>
        <h2>Model Context Protocol (MCP) and OAuth</h2>
        <p>
            <a href="https://modelcontextprotocol.io" target="_blank">MCP</a> is a lightweight protocol built to allow AI agents/clients to interact with servers to provide dynamic content, prompting, and tool calling.
            This is very important for websites wanting to provide a great <a href="https://agentexperience.ax?utm_source=serverless-mcp-guide&utm_medium=web&utm_content=example-serverless-mcp" target="_blank">agent experience (AX)</a> through allowing agents to
            work dynamically with information and capabilities on the server.
        </p>
        <p>
            <a href="https://stytch.com/blog/what-is-oauth-2-0/" target="_blank">OAuth</a> is a set of protocols that allow web apps to share information with each other on behalf of a user, without sharing any account credentials.
            This allows users to share their information with agents in a secure, auditable, revocable way. Websites wanting to share user data with agents must become OAuth Identity Providers in order to issue access tokens for use with MCP.
        </p>
    </section>

    <section>
        <h2>Try out this example</h2>

        <h3>Using an MCP Client</h3>
        <p>
            Provide the following configuration to your MCP client. The MCP client will trigger an OAuth login flow, giving you the ability to delegate access to your protected resources.
            After approving access, you will be able to see the tools, prompts, resources, etc. available to the agent.</p>
        <pre><code>{`{
    "mcpServers": {
        "stytch-netlify-todo-app": {
            "command": "npx",
            "args": [
                "mcp-remote@next",
                "https://stytch-auth-mcp.netlify.app/mcp",
                "--host",
                "127.0.0.1"
            ]
        }
    }
}`}</code></pre>

        <h3>Using the MCP Inspector</h3>
        <p>MCP comes with an <a href="https://github.com/modelcontextprotocol/inspector">inspector tool</a> for testing the server locally or remotely. Run the following command in your terminal to use the inspector. After connecting, you will see the tools, prompts, resources, etc. available to the agent.</p>
        <pre><code>npx @modelcontextprotocol/inspector npx mcp-remote@next https://stytch-auth-mcp.netlify.app/mcp</code></pre>

    </section>

    <hr>
    <section>
        <h2>Deploy your own</h2>
        <p>
            A great place to start is to clone and deploy your own copy of this example. You can do that by clicking the button below.
        </p>
        <p>
            <a href="https://app.netlify.com/start/deploy?repository=https://github.com/netlify/examples/&create_from_path=examples/mcp/stytch-auth-mcp&utm_campaign=dx-examples"><img src="https://www.netlify.com/img/deploy/button.svg" alt="Deploy to Netlify"></a>
        </p>

        <p><small>Clicking the button will clone <a href="https://github.com/netlify/examples/tree/main/examples/mcp/stytch-auth-mcp">this example</a> from <a href="https://github.com/netlify/examples">the examples repo</a> and deploy it as a new site on <a href="https://netlify.com/?utm_campaign=dx-examples">Netlify</a></small></p>

    </section>
    <hr>
    <section>
        <h2>More information</h2>
        <ul>
            <li><a href="https://modelcontextprotocol.io/">Model Context Protocol (MCP)</a></li>
            <li><a href="https://docs.netlify.com/functions/overview/?utm_campaign=dx-examples&utm_source=example-site&utm_medium=web&utm_content=example-mcp-serverless">Docs: Netlify Functions</a></li>
            <li><a href="https://agentexperience.ax?utm_source=serverless-mcp-guide&utm_medium=web&utm_content=example-mcp-serverless">Agent Experience (AX)</a></li>
            <li><a href="https://stytch.com/docs/guides/implementation/frontend-pre-built-ui?utm_source=serverless-mcp-guide&utm_medium=web&utm_content=example-mcp-serverless">Docs: Stytch UI Components</a></li>
            <li><a href="https://stytch.com/docs/guides/connected-apps/getting-started?utm_source=serverless-mcp-guide&utm_medium=web&utm_content=example-mcp-serverless">Stytch Connected Apps</a></li>
        </ul>
    </section>
</Layout>